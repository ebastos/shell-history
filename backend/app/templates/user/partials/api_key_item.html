<div class="api-key-item" id="api-key-{{ api_key.id }}">
    <div class="api-key-info">
        <div class="api-key-name">{{ api_key.name or "Unnamed Key" }}</div>
        <div class="api-key-meta">
            {% if show_key %}
            <div style="background: var(--bg-color); padding: 0.75rem; border-radius: 4px; margin-bottom: 0.5rem;">
                <code style="font-family: 'Fira Code', monospace; font-size: 0.875rem; color: var(--text-primary); word-break: break-all;">{{ api_key.key | e }}</code>
                <button data-api-key="{{ api_key.key | e }}" onclick="copyToClipboard(this.dataset.apiKey)" style="margin-left: 0.5rem; padding: 0.25rem 0.5rem; background: var(--accent-color); color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.75rem;">Copy</button>
            </div>
            <p style="color: var(--text-secondary); font-size: 0.75rem; margin: 0 0 0.5rem 0;">⚠️ Copy this key now - you won't be able to see it again!</p>
            {% endif %}
            Created: {{ api_key.created_at.strftime('%Y-%m-%d %H:%M') if api_key.created_at else 'N/A' }}
            {% if api_key.last_used_at %}
            | Last used: {{ api_key.last_used_at.strftime('%Y-%m-%d %H:%M') }}
            {% else %}
            | Never used
            {% endif %}
        </div>
    </div>
    <div class="api-key-actions">
        <button class="btn btn-danger btn-small" hx-post="/account/api-keys/{{ api_key.id }}/revoke"
            hx-target="#api-key-{{ api_key.id }}" hx-swap="outerHTML">Revoke</button>
    </div>
</div>

<script>
function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(() => {
        // Show a brief toast or update button text
        const btn = event.target;
        const originalText = btn.textContent;
        btn.textContent = 'Copied!';
        setTimeout(() => {
            btn.textContent = originalText;
        }, 2000);
    });
}
</script>
